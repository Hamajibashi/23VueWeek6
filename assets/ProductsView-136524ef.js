import{_ as m,r as b,o as n,c as i,e as v,d,T as k,a as t,F as h,f as x,n as w,t as l,b as y,w as f,g as $,v as I}from"./index-bd23fdf7.js";const _="https://vue3-course-api.hexschool.io",u="hmjbs",C={data(){return{products:[],productId:[],loadingItem:""}},methods:{addLoading(){const s=this.$loading.show();setTimeout(()=>{s.hide()},800)},getProducts(){const s=`${_}/v2/api/${u}/products`;this.axios.get(s).then(a=>{this.products=a.data.products}).catch(a=>{alert(a.data.message)})},addToCart(s,a=1){const r={product_id:s,qty:a};this.loadingItem=s;const c=`${_}/v2/api/${u}/cart`;this.axios.post(c,{data:r}).then(o=>{alert(o.data.message),this.loadingItem=""}).catch(o=>{alert(o.response.data.message)})}},mounted(){this.addLoading(),this.getProducts()}},T={class:"container"},B={class:"mt-4"},P=t("h1",{class:"h2 fw-bold mb-4 text-center"},"產品列表",-1),V={class:"table align-middle"},L=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),N={style:{width:"200px"}},S={key:0,class:"h5"},z={key:1},D={class:"h6"},F={class:"h5"},U={class:"btn-group btn-group-sm"},j=["disabled","onClick"],E={class:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"};function q(s,a,r,c,o,g){const p=b("router-link");return n(),i(h,null,[(n(),v(k,{to:"title"},[d(" | 產品列表")])),t("div",T,[t("div",B,[P,t("table",V,[L,t("tbody",null,[(n(!0),i(h,null,x(o.products,e=>(n(),i("tr",{key:e.id},[t("td",N,[t("div",{style:w([{backgroundImage:`url(${e.imageUrl})`},{height:"100px","background-size":"cover","background-position":"center"}])},null,4)]),t("td",null,l(e.title),1),t("td",null,[e.price===e.origin_price?(n(),i("div",S,l(e.price)+" 元 ",1)):(n(),i("div",z,[t("del",D,"原價 "+l(e.origin_price)+" 元",1),t("div",F,"現在只要 "+l(e.price)+" 元",1)]))]),t("td",null,[t("div",U,[y(p,{to:`/product/${e.id}`,class:"btn btn-outline-secondary"},{default:f(()=>[d("查看更多")]),_:2},1032,["to"]),t("button",{type:"button",class:"btn btn-outline-danger",disabled:e.id===o.loadingItem,onClick:A=>g.addToCart(e.id)},[$(t("span",E,null,512),[[I,e.id===o.loadingItem]]),d(" 加到購物車 ")],8,j)])])]))),128))])])])])],64)}const H=m(C,[["render",q]]);export{H as default};
